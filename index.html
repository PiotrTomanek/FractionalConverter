<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Precision Converter</title>
    <style>
        :root {
            --bg: #000;
            --text: #FFF;
            --dim: #444;
            --key: #111;
        }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: -apple-system, sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        #display {
            flex: 2;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 30px;
            text-align: right;
        }
        #result { font-size: 80px; font-weight: 200; }
        #unit-label { font-size: 14px; color: var(--dim); letter-spacing: 3px; text-transform: uppercase; margin-top: 10px;}
        
        #input-preview {
            padding: 10px 30px;
            font-size: 24px;
            color: var(--dim);
            text-align: right;
            border-bottom: 1px solid #222;
        }

        #keypad {
            flex: 3;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            background: #000;
            gap: 1px;
        }
        button {
            background: var(--key);
            border: none;
            color: #FFF;
            font-size: 24px;
            -webkit-tap-highlight-color: transparent;
        }
        button:active { background: #222; }
        .op { color: #FF9500; font-size: 30px; }
        .space-key { font-size: 14px; color: #888; letter-spacing: 1px; }
    </style>
</head>
<body>

    <div id="display">
        <div id="result">0</div>
        <div id="unit-label">Centimeters</div>
    </div>

    <div id="input-preview">0</div>

    <div id="keypad">
        <button onclick="clearAll()">C</button>
        <button class="space-key" onclick="addText(' ')">SPACE (FT-IN)</button>
        <button onclick="setOut('in')">IN</button>
        <button class="op" onclick="addText('/')">รท</button>

        <button onclick="addText('7')">7</button>
        <button onclick="addText('8')">8</button>
        <button onclick="addText('9')">9</button>
        <button class="op" onclick="addText('*')">ร</button>

        <button onclick="addText('4')">4</button>
        <button onclick="addText('5')">5</button>
        <button onclick="addText('6')">6</button>
        <button class="op" onclick="addText('-')">-</button>

        <button onclick="addText('1')">1</button>
        <button onclick="addText('2')">2</button>
        <button onclick="addText('3')">3</button>
        <button class="op" onclick="addText('+')">+</button>

        <button onclick="setOut('cm')">CM</button>
        <button onclick="addText('0')">0</button>
        <button onclick="addText('.')">.</button>
        <button class="op" onclick="calculate()">=</button>
    </div>

    <script>
        let input = "";
        let mode = "cm";

        function addText(val) {
            input += val;
            render();
        }

        function clearAll() {
            input = "";
            render();
        }

        function setOut(m) {
            mode = m;
            document.getElementById('unit-label').innerText = m === 'cm' ? 'Centimeters' : 'Inches';
            render();
        }

        function render() {
            document.getElementById('input-preview').innerText = input || "0";
            calculate();
        }

        function calculate() {
            try {
                let tempInput = input.trim();
                if (!tempInput) {
                    document.getElementById('result').innerText = "0";
                    return;
                }

                // --- THE ARCHITECT'S LOGIC ---
                // If there is a space, e.g., "5 4", the first part is Feet, second is Inches.
                let parts = tempInput.split(" ");
                let totalInches = 0;

                if (parts.length === 1) {
                    // Just inches or a calculation
                    totalInches = eval(parts[0]);
                } else {
                    // "5 4 1/2" -> 5 is feet, "4 1/2" is inches.
                    let feet = parseFloat(eval(parts[0])) * 12;
                    // Join the rest back as inches calculation (e.g. 4 + 1/2)
                    let inchPart = parts.slice(1).join("+");
                    let inches = eval(inchPart);
                    totalInches = feet + inches;
                }

                let final = mode === 'cm' ? totalInches * 2.54 : totalInches;
                
                if(!isNaN(final)) {
                    document.getElementById('result').innerText = parseFloat(final.toFixed(3));
                }
            } catch (e) { /* Silent fail for partial typing */ }
        }
    </script>
</body>
</html>
